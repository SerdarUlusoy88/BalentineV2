<?xml version="1.0" encoding="utf-8" ?>
<toolkit:Popup
    x:Class="BalentineV2.UI.Popups.LanguageDropdownPopup"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit">

    <!-- Fullscreen overlay -->
    <Grid Padding="0" RowDefinitions="Auto,*">

        <!-- Şeffaf tık alanı (dışarı tıklayınca kapat) -->
        <Grid Grid.RowSpan="2">
            <Grid.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnBackdropTapped" />
            </Grid.GestureRecognizers>
        </Grid>

        <!-- Dropdown panel (Top-right) -->
        <Grid RowDefinitions="Auto"
              HorizontalOptions="End"
              VerticalOptions="Start"
              Margin="0,56,12,0">
            <!-- 56: TopStatusBar yüksekliği, 12: senin padding çizgin -->

            <Border BackgroundColor="#252B33"
                    Stroke="#3A4048"
                    StrokeThickness="1"
                    StrokeShape="RoundRectangle 14"
                    Padding="10"
                    WidthRequest="190">

                <VerticalStackLayout Spacing="8">

                    <Label Text="{Binding Title}"
                           TextColor="#D8DEE6"
                           FontAttributes="Bold"
                           FontSize="13" />

                    <BoxView HeightRequest="1"
                             Opacity="0.35"
                             BackgroundColor="#D8DEE6" />

                    <CollectionView ItemsSource="{Binding Items}"
                                    SelectionMode="Single"
                                    SelectionChanged="OnSelectionChanged"
                                    BackgroundColor="Transparent">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Grid ColumnDefinitions="Auto,*"
                                      Padding="6,10">

                                    <Label Grid.Column="0"
                                           Text="{Binding Code}"
                                           TextColor="#D8DEE6"
                                           FontAttributes="Bold" />

                                    <Label Grid.Column="1"
                                           Text="{Binding Name}"
                                           TextColor="#D8DEE6"
                                           Margin="10,0,0,0" />
                                </Grid>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>

                </VerticalStackLayout>
            </Border>
        </Grid>

    </Grid>
</toolkit:Popup>
