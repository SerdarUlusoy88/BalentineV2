<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:Class="BalentineV2.UI.Views.Pages.Modules.LampView"
             BackgroundColor="#111">

    <Grid>

        <!-- A/B video -->
        <toolkit:MediaElement x:Name="AnimVideo"
                              ShouldShowPlaybackControls="False"
                              ShouldAutoPlay="False"
                              ShouldLoopPlayback="False"
                              Aspect="AspectFill"
                              HorizontalOptions="Fill"
                              VerticalOptions="Fill"
                              Volume="0.0"
                              Opacity="1" />

        <toolkit:MediaElement x:Name="PlayerB"
                              ShouldShowPlaybackControls="False"
                              ShouldAutoPlay="False"
                              ShouldLoopPlayback="False"
                              Aspect="AspectFill"
                              HorizontalOptions="Fill"
                              VerticalOptions="Fill"
                              Volume="0.0"
                              Opacity="0" />

        <!-- Sağ ikon rail: TopBar–Footer arası (daha yukarı + daha sıkı) -->
        <Grid HorizontalOptions="End"
      VerticalOptions="Fill"
      Margin="0,65,18,95"
      WidthRequest="72">

            <CollectionView ItemsSource="{Binding Items}"
                    SelectionMode="None"
                    VerticalOptions="Start"
                    Margin="0,0,0,0">

                <CollectionView.ItemsLayout>
                    <LinearItemsLayout Orientation="Vertical"
                               ItemSpacing="8" />
                </CollectionView.ItemsLayout>

                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <!-- ✅ item dikey boşluk minimum -->
                        <Grid Margin="0,0">

                            <!-- 1) Beyaz ikon (off) -->
                            <Image Source="{Binding IconSvg}"
                           WidthRequest="40"
                           HeightRequest="40"
                           HorizontalOptions="Center"
                           VerticalOptions="Center">
                                <Image.Behaviors>
                                    <toolkit:IconTintColorBehavior TintColor="White" />
                                </Image.Behaviors>
                                <Image.Triggers>
                                    <DataTrigger TargetType="Image" Binding="{Binding IsOn}" Value="True">
                                        <Setter Property="Opacity" Value="0" />
                                    </DataTrigger>
                                </Image.Triggers>
                            </Image>

                            <!-- 2) Sarı ikon (on) -->
                            <Image Source="{Binding IconSvg}"
                           WidthRequest="40"
                           HeightRequest="40"
                           HorizontalOptions="Center"
                           VerticalOptions="Center"
                           Opacity="0">
                                <Image.Behaviors>
                                    <toolkit:IconTintColorBehavior TintColor="#F6A821" />
                                </Image.Behaviors>
                                <Image.Triggers>
                                    <DataTrigger TargetType="Image" Binding="{Binding IsOn}" Value="True">
                                        <Setter Property="Opacity" Value="1" />
                                    </DataTrigger>
                                </Image.Triggers>
                            </Image>

                            <Grid.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnLampTapped"
                                              CommandParameter="{Binding Key}" />
                            </Grid.GestureRecognizers>

                        </Grid>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </Grid>


    </Grid>
</ContentPage>
